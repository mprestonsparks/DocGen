# MCP Bridge for Windsurf Integration

This directory contains a TypeScript-based bridge that enables integration between DocGen's Docker-based MCP servers and Windsurf's stdio-based MCP client.

## Overview

Windsurf requires MCP servers to use the stdio transport protocol, while our DocGen MCP servers use HTTP/JSON-RPC. This bridge acts as an adapter between these two transport protocols:

```
┌─────────────┐      stdio      ┌─────────────┐      HTTP      ┌─────────────┐
│   Windsurf  │ ◄──────────────►│ MCP Bridge  │ ◄─────────────►│ MCP Servers │
└─────────────┘                 └─────────────┘                └─────────────┘
```

## How It Works

1. Windsurf launches the bridge as a child process and communicates with it via stdio (stdin/stdout)
2. The bridge receives JSON-RPC requests from Windsurf via stdin
3. The bridge forwards these requests to the appropriate Docker-based MCP server via HTTP
4. The bridge receives responses from the MCP server and sends them back to Windsurf via stdout

## Files

- `mcp-bridge.ts` - The main TypeScript implementation of the bridge
- `package.json` - Node.js package configuration and dependencies
- `tsconfig.json` - TypeScript compiler configuration

## Configuration

The bridge is configured via environment variables:

- `MCP_ORCHESTRATOR_URL` - URL of the MCP Orchestrator server (default: http://localhost:8080/mcp)
- `MCP_API_KEY` - API key for authenticating with the MCP servers (default: development_key)

These environment variables are automatically set by the `deploy_mcp.py` script when configuring Windsurf integration.

## Building

To build the bridge manually:

```bash
# Navigate to the bridge directory
cd src/mcp/bridge

# Install dependencies
npm install

# Build the TypeScript code
npm run build
```

The compiled JavaScript will be output to the `dist` directory.

## Deployment

The bridge is automatically built and configured by the `deploy_mcp.py` script. To deploy:

```bash
python scripts/deploy_mcp.py
```

This script:
1. Builds and starts the Docker-based MCP servers
2. Builds the TypeScript bridge
3. Configures Windsurf to use the bridge

## Windsurf Configuration

The bridge is configured in Windsurf via the `~/.codeium/windsurf/mcp_config.json` file:

```json
{
  "mcpServers": {
    "docgen-mcp-bridge": {
      "command": "node",
      "args": [
        "/path/to/mcp-bridge.js"
      ],
      "env": {
        "MCP_ORCHESTRATOR_URL": "http://localhost:8080/mcp",
        "MCP_API_KEY": "development_key"
      }
    }
  }
}
```

This configuration is automatically generated by the `deploy_mcp.py` script.

## Future Development

This bridge currently supports Windsurf on Windows. Future development will extend support to:

- Windsurf on macOS
- Windsurf on Linux
- Claude Code on macOS
- Other AI-assisted development tools

The bridge architecture will be refactored to support multiple tools and platforms while maintaining a consistent user experience.
